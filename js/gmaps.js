!function(x,F){"object"==typeof exports?module.exports=F():"function"==typeof define&&define.amd?define(["jquery","googlemaps!"],F):x.GMaps=F()}(this,function(){function x(a,b){if(a===b)return a;for(var c in b)void 0!==b[c]&&(a[c]=b[c]);return a}function F(a,b){var c,d=Array.prototype.slice.call(arguments,2),f=[],g=a.length;if(Array.prototype.map&&a.map===Array.prototype.map)f=Array.prototype.map.call(a,function(h){var n=d.slice(0);return n.splice(0,0,h),b.apply(this,n)});else for(c=0;c<g;c++)(callback_params=
d).splice(0,0,a[c]),f.push(b.apply(this,callback_params));return f}function M(a){for(var b=[],c=0;c<a.length;c++)b=b.concat(a[c]);return b}function C(a,b){a=a.replace("#","");return"jQuery"in window&&b?$("#"+a,b)[0]:document.getElementById(a)}var K,N,G,O,L=function(a,b){for(var c,d,f,g,h=0;h<a.length;h++)a[h]instanceof google.maps.LatLng||(0<a[h].length&&"object"==typeof a[h][0]?a[h]=L(a[h],b):a[h]=(c=a[h],d=b,g=f=void 0,f=c[0],g=c[1],d&&(f=c[1],g=c[0]),new google.maps.LatLng(f,g)));return a},k=(K=
document,N=function(a){function b(m,r){var p,u="",A=window.context_menu[f.el.id][m];for(v in A)A.hasOwnProperty(v)&&(p=A[v],u+='<li><a id="'+m+"_"+v+'" href="#">'+p.title+"</a></li>");if(C("gmaps_context_menu")){p=C("gmaps_context_menu");p.innerHTML=u;var v;u=p.getElementsByTagName("a");var S=u.length;for(v=0;v<S;v++){var P=u[v];google.maps.event.clearListeners(P,"click");google.maps.event.addDomListenerOnce(P,"click",function(y){y.preventDefault();A[this.id.replace(m+"_","")].action.apply(f,[r]);
f.hideContextMenu()},!1)}v=function(y){var Q=0,R=0;if(y.getBoundingClientRect)return y=y.getBoundingClientRect(),[y.left- -(window.scrollX||window.pageXOffset),y.top- -(window.scrollY||window.pageYOffset)];if(y.offsetParent)for(;Q+=y.offsetLeft,R+=y.offsetTop,y=y.offsetParent;);return[Q,R]}.apply(this,[f.el]);u=v[0]+r.pixel.x-15;v=v[1]+r.pixel.y-15;p.style.left=u+"px";p.style.top=v+"px"}}function c(m,r){google.maps.event.addListener(m,r,function(p){null==p&&(p=this);a[r].apply(this,[p]);f.hideContextMenu()})}
if("object"!=typeof window.google||!window.google.maps)return"object"==typeof window.console&&window.console.error&&console.error("Google Maps API is required. Please register the following JavaScript library https://maps.googleapis.com/maps/api/js."),function(){};if(!this)return new N(a);a.zoom=a.zoom||15;a.mapType=a.mapType||"roadmap";var d=function(m,r){return void 0===m?r:m},f=this,g="bounds_changed center_changed click dblclick drag dragend dragstart idle maptypeid_changed projection_changed resize tilesloaded zoom_changed".split(" "),
h=["mousemove","mouseout","mouseover"],n="el lat lng mapType width height markerClusterer enableNewStyle".split(" ");var l=a.el||a.div;var w=a.markerClusterer,t=google.maps.MapTypeId[a.mapType.toUpperCase()],B=new google.maps.LatLng(a.lat,a.lng),q=d(a.zoomControl,!0),D=a.zoomControlOpt||{style:"DEFAULT",position:"TOP_LEFT"},E=D.style||"DEFAULT",z=D.position||"TOP_LEFT",T=d(a.panControl,!0),U=d(a.mapTypeControl,!0);D=d(a.scaleControl,!0);d=d(a.streetViewControl,!0);var H={};t={zoom:this.zoom,center:B,
mapTypeId:t};d={panControl:T,zoomControl:q,zoomControlOptions:{style:google.maps.ZoomControlStyle[E],position:google.maps.ControlPosition[z]},mapTypeControl:U,scaleControl:D,streetViewControl:d,overviewMapControl:!0};if("string"==typeof a.el||"string"==typeof a.div?-1<l.indexOf("#")?this.el=C(l,a.context):this.el=function(m,r){m=m.replace(".","");return m=("jQuery"in this&&r?$("."+m,r):document.getElementsByClassName(m))[0]}.apply(this,[l,a.context]):this.el=l,void 0===this.el||null===this.el)throw"No element defined.";
window.context_menu=window.context_menu||{};window.context_menu[f.el.id]={};this.controls=[];this.overlays=[];this.layers=[];this.singleLayers={};this.markers=[];this.polylines=[];this.routes=[];this.polygons=[];this.overlay_el=this.infoWindow=null;this.zoom=a.zoom;this.registered_events={};this.el.style.width=a.width||this.el.scrollWidth||this.el.offsetWidth;this.el.style.height=a.height||this.el.scrollHeight||this.el.offsetHeight;google.maps.visualRefresh=a.enableNewStyle;for(l=0;l<n.length;l++)delete a[n[l]];
1!=a.disableDefaultUI&&(t=x(t,d));H=x(t,a);for(l=0;l<g.length;l++)delete H[g[l]];for(l=0;l<h.length;l++)delete H[h[l]];this.map=new google.maps.Map(this.el,H);w&&(this.markerClusterer=w.apply(this,[this.map]));this.buildContextMenu=function(m,r){"marker"===m?(r.pixel={},(p=new google.maps.OverlayView).setMap(f.map),p.draw=function(){var A=p.getProjection(),v=r.marker.getPosition();r.pixel=A.fromLatLngToContainerPixel(v);b(m,r)}):b(m,r);var p,u=C("gmaps_context_menu");setTimeout(function(){u.style.display=
"block"},0)};this.setContextMenu=function(m){window.context_menu[f.el.id][m.control]={};var r,p,u=K.createElement("ul");for(r in m.options)m.options.hasOwnProperty(r)&&(p=m.options[r],window.context_menu[f.el.id][m.control][p.name]={title:p.title,action:p.action});u.id="gmaps_context_menu";u.style.display="none";u.style.position="absolute";u.style.minWidth="100px";u.style.background="white";u.style.listStyle="none";u.style.padding="8px";u.style.boxShadow="2px 2px 6px #ccc";C("gmaps_context_menu")||
K.body.appendChild(u);var A=C("gmaps_context_menu");google.maps.event.addDomListener(A,"mouseout",function(v){v.relatedTarget&&this.contains(v.relatedTarget)||window.setTimeout(function(){A.style.display="none"},400)},!1)};this.hideContextMenu=function(){var m=C("gmaps_context_menu");m&&(m.style.display="none")};google.maps.event.addListener(this.map,"zoom_changed",this.hideContextMenu);for(d=0;d<g.length;d++)(I=g[d])in a&&c(this.map,I);var I;for(d=0;d<h.length;d++)(I=h[d])in a&&c(this.map,I);google.maps.event.addListener(this.map,
"rightclick",function(m){a.rightclick&&a.rightclick.apply(this,[m]);null!=window.context_menu[f.el.id].map&&f.buildContextMenu("map",m)});this.refresh=function(){google.maps.event.trigger(this.map,"resize")};this.fitZoom=function(){for(var m=[],r=this.markers.length,p=0;p<r;p++)"boolean"==typeof this.markers[p].visible&&this.markers[p].visible&&m.push(this.markers[p].getPosition());this.fitLatLngBounds(m)};this.fitLatLngBounds=function(m){for(var r=m.length,p=new google.maps.LatLngBounds,u=0;u<r;u++)p.extend(m[u]);
this.map.fitBounds(p)};this.setCenter=function(m,r,p){this.map.panTo(new google.maps.LatLng(m,r));p&&p()};this.getElement=function(){return this.el};this.zoomIn=function(m){m=m||1;this.zoom=this.map.getZoom()+m;this.map.setZoom(this.zoom)};this.zoomOut=function(m){m=m||1;this.zoom=this.map.getZoom()-m;this.map.setZoom(this.zoom)};var J;g=[];for(J in this.map)"function"!=typeof this.map[J]||this[J]||g.push(J);for(l=0;l<g.length;l++)!function(m,r,p){m[p]=function(){return r[p].apply(r,arguments)}}(this,
this.map,g[l])});return k.prototype.createControl=function(a){var b,c,d=document.createElement("div");for(b in d.style.cursor="pointer",!0!==a.disableDefaultStyles&&(d.style.fontFamily="Roboto, Arial, sans-serif",d.style.fontSize="11px",d.style.boxShadow="rgba(0, 0, 0, 0.298039) 0px 1px 4px -1px"),a.style)d.style[b]=a.style[b];for(c in a.id&&(d.id=a.id),a.title&&(d.title=a.title),a.classes&&(d.className=a.classes),a.content&&("string"==typeof a.content?d.innerHTML=a.content:a.content instanceof HTMLElement&&
d.appendChild(a.content)),a.position&&(d.position=google.maps.ControlPosition[a.position.toUpperCase()]),a.events)!function(f){google.maps.event.addDomListener(d,f,function(){a.events[f].apply(this,[this])})}(c);return d.index=1,d},k.prototype.addControl=function(a){return a=this.createControl(a),this.controls.push(a),this.map.controls[a.position].push(a),a},k.prototype.removeControl=function(a){for(var b=null,c=0;c<this.controls.length;c++)this.controls[c]==a&&(b=this.controls[c].position,this.controls.splice(c,
1));if(b)for(c=0;c<this.map.controls.length;c++)if(b=this.map.controls[a.position],b.getAt(c)==a){b.removeAt(c);break}return a},k.prototype.createMarker=function(a){if(null==a.lat&&null==a.lng&&null==a.position)throw"No latitude or longitude defined.";var b=this,c=a.details,d=a.fences,f=a.outside,g={position:new google.maps.LatLng(a.lat,a.lng),map:null};g=x(g,a);delete g.lat;delete g.lng;delete g.fences;delete g.outside;var h=new google.maps.Marker(g);if(h.fences=d,a.infoWindow)for(h.infoWindow=new google.maps.InfoWindow(a.infoWindow),
g=["closeclick","content_changed","domready","position_changed","zindex_changed"],d=0;d<g.length;d++)!function(l,w){a.infoWindow[w]&&google.maps.event.addListener(l,w,function(t){a.infoWindow[w].apply(this,[t])})}(h.infoWindow,g[d]);g="animation_changed clickable_changed cursor_changed draggable_changed flat_changed icon_changed position_changed shadow_changed shape_changed title_changed visible_changed zindex_changed".split(" ");var n="dblclick drag dragend dragstart mousedown mouseout mouseover mouseup".split(" ");
for(d=0;d<g.length;d++)!function(l){a[l]&&google.maps.event.addListener(h,l,function(){a[l].apply(this,[this])})}(g[d]);for(d=0;d<n.length;d++)!function(l,w){a[w]&&google.maps.event.addListener(h,w,function(t){t.pixel||(t.pixel=l.getProjection().fromLatLngToPoint(t.latLng));a[w].apply(this,[t])})}(this.map,n[d]);return google.maps.event.addListener(h,"click",function(){this.details=c;a.click&&a.click.apply(this,[this]);h.infoWindow&&(b.hideInfoWindows(),h.infoWindow.open(b.map,h))}),google.maps.event.addListener(h,
"rightclick",function(l){l.marker=this;a.rightclick&&a.rightclick.apply(this,[l]);null!=window.context_menu[b.el.id].marker&&b.buildContextMenu("marker",l)}),h.fences&&google.maps.event.addListener(h,"dragend",function(){b.checkMarkerGeofence(h,function(l,w){f(l,w)})}),h},k.prototype.addMarker=function(a){if(!a.hasOwnProperty("gm_accessors_")){if(!(a.hasOwnProperty("lat")&&a.hasOwnProperty("lng")||a.position))throw"No latitude or longitude defined.";a=this.createMarker(a)}return a.setMap(this.map),
this.markerClusterer&&this.markerClusterer.addMarker(a),this.markers.push(a),k.fire("marker_added",a,this),a},k.prototype.addMarkers=function(a){for(var b,c=0;b=a[c];c++)this.addMarker(b);return this.markers},k.prototype.hideInfoWindows=function(){for(var a,b=0;a=this.markers[b];b++)a.infoWindow&&a.infoWindow.close()},k.prototype.removeMarker=function(a){for(var b=0;b<this.markers.length;b++)if(this.markers[b]===a){this.markers[b].setMap(null);this.markers.splice(b,1);this.markerClusterer&&this.markerClusterer.removeMarker(a);
k.fire("marker_removed",a,this);break}return a},k.prototype.removeMarkers=function(a){var b=[];if(void 0===a){for(var c=0;c<this.markers.length;c++)(f=this.markers[c]).setMap(null),k.fire("marker_removed",f,this);this.markerClusterer&&this.markerClusterer.clearMarkers&&this.markerClusterer.clearMarkers()}else{for(c=0;c<a.length;c++){var d=this.markers.indexOf(a[c]);-1<d&&((f=this.markers[d]).setMap(null),this.markerClusterer&&this.markerClusterer.removeMarker(f),k.fire("marker_removed",f,this))}var f;
for(c=0;c<this.markers.length;c++)null!=(f=this.markers[c]).getMap()&&b.push(f)}this.markers=b},k.prototype.drawOverlay=function(a){var b=new google.maps.OverlayView,c=!0;return b.setMap(this.map),null!=a.auto_show&&(c=a.auto_show),b.onAdd=function(){var d=document.createElement("div");d.style.borderStyle="none";d.style.borderWidth="0px";d.style.position="absolute";d.style.zIndex=100;d.innerHTML=a.content;b.el=d;a.layer||(a.layer="overlayLayer");var f=this.getPanes(),g=["contextmenu","DOMMouseScroll",
"dblclick","mousedown"];f[a.layer].appendChild(d);for(var h,n=0;n<g.length;n++)h=g[n],google.maps.event.addDomListener(d,h,function(l){-1!=navigator.userAgent.toLowerCase().indexOf("msie")&&document.all?(l.cancelBubble=!0,l.returnValue=!1):l.stopPropagation()});a.click&&(f.overlayMouseTarget.appendChild(b.el),google.maps.event.addDomListener(b.el,"click",function(){a.click.apply(b,[b])}));google.maps.event.trigger(this,"ready")},b.draw=function(){var d=this.getProjection().fromLatLngToDivPixel(new google.maps.LatLng(a.lat,
a.lng));a.horizontalOffset=a.horizontalOffset||0;a.verticalOffset=a.verticalOffset||0;var f=b.el,g=f.children[0],h=g.clientHeight;g=g.clientWidth;switch(a.verticalAlign){case "top":f.style.top=d.y-h+a.verticalOffset+"px";break;default:case "middle":f.style.top=d.y-h/2+a.verticalOffset+"px";break;case "bottom":f.style.top=d.y+a.verticalOffset+"px"}switch(a.horizontalAlign){case "left":f.style.left=d.x-g+a.horizontalOffset+"px";break;default:case "center":f.style.left=d.x-g/2+a.horizontalOffset+"px";
break;case "right":f.style.left=d.x+a.horizontalOffset+"px"}f.style.display=c?"block":"none";c||a.show.apply(this,[f])},b.onRemove=function(){var d=b.el;a.remove?a.remove.apply(this,[d]):(b.el.parentNode.removeChild(b.el),b.el=null)},this.overlays.push(b),b},k.prototype.removeOverlay=function(a){for(var b=0;b<this.overlays.length;b++)if(this.overlays[b]===a){this.overlays[b].setMap(null);this.overlays.splice(b,1);break}},k.prototype.removeOverlays=function(){for(var a,b=0;a=this.overlays[b];b++)a.setMap(null);
this.overlays=[]},k.prototype.drawPolyline=function(a){var b=[],c=a.path;if(c.length)if(void 0===c[0][0])b=c;else for(var d,f=0;d=c[f];f++)b.push(new google.maps.LatLng(d[0],d[1]));b={map:this.map,path:b,strokeColor:a.strokeColor,strokeOpacity:a.strokeOpacity,strokeWeight:a.strokeWeight,geodesic:a.geodesic,clickable:!0,editable:!1,visible:!0};a.hasOwnProperty("clickable")&&(b.clickable=a.clickable);a.hasOwnProperty("editable")&&(b.editable=a.editable);a.hasOwnProperty("icons")&&(b.icons=a.icons);
a.hasOwnProperty("zIndex")&&(b.zIndex=a.zIndex);var g=new google.maps.Polyline(b);b="click dblclick mousedown mousemove mouseout mouseover mouseup rightclick".split(" ");for(c=0;c<b.length;c++)!function(h){a[h]&&google.maps.event.addListener(g,h,function(n){a[h].apply(this,[n])})}(b[c]);return this.polylines.push(g),k.fire("polyline_added",g,this),g},k.prototype.removePolyline=function(a){for(var b=0;b<this.polylines.length;b++)if(this.polylines[b]===a){this.polylines[b].setMap(null);this.polylines.splice(b,
1);k.fire("polyline_removed",a,this);break}},k.prototype.removePolylines=function(){for(var a,b=0;a=this.polylines[b];b++)a.setMap(null);this.polylines=[]},k.prototype.drawCircle=function(a){delete (a=x({map:this.map,center:new google.maps.LatLng(a.lat,a.lng)},a)).lat;delete a.lng;for(var b=new google.maps.Circle(a),c="click dblclick mousedown mousemove mouseout mouseover mouseup rightclick".split(" "),d=0;d<c.length;d++)!function(f){a[f]&&google.maps.event.addListener(b,f,function(g){a[f].apply(this,
[g])})}(c[d]);return this.polygons.push(b),b},k.prototype.drawRectangle=function(a){a=x({map:this.map},a);var b=new google.maps.LatLngBounds(new google.maps.LatLng(a.bounds[0][0],a.bounds[0][1]),new google.maps.LatLng(a.bounds[1][0],a.bounds[1][1]));a.bounds=b;var c=new google.maps.Rectangle(a);b="click dblclick mousedown mousemove mouseout mouseover mouseup rightclick".split(" ");for(var d=0;d<b.length;d++)!function(f){a[f]&&google.maps.event.addListener(c,f,function(g){a[f].apply(this,[g])})}(b[d]);
return this.polygons.push(c),c},k.prototype.drawPolygon=function(a){var b=!1;a.hasOwnProperty("useGeoJSON")&&(b=a.useGeoJSON);delete a.useGeoJSON;a=x({map:this.map},a);0==b&&(a.paths=[a.paths.slice(0)]);0<a.paths.length&&0<a.paths[0].length&&(a.paths=M(F(a.paths,L,b)));var c=new google.maps.Polygon(a);b="click dblclick mousedown mousemove mouseout mouseover mouseup rightclick".split(" ");for(var d=0;d<b.length;d++)!function(f){a[f]&&google.maps.event.addListener(c,f,function(g){a[f].apply(this,[g])})}(b[d]);
return this.polygons.push(c),k.fire("polygon_added",c,this),c},k.prototype.removePolygon=function(a){for(var b=0;b<this.polygons.length;b++)if(this.polygons[b]===a){this.polygons[b].setMap(null);this.polygons.splice(b,1);k.fire("polygon_removed",a,this);break}},k.prototype.removePolygons=function(){for(var a,b=0;a=this.polygons[b];b++)a.setMap(null);this.polygons=[]},k.prototype.getFromFusionTables=function(a){var b=a.events;delete a.events;var c,d=new google.maps.FusionTablesLayer(a);for(c in b)!function(f){google.maps.event.addListener(d,
f,function(g){b[f].apply(this,[g])})}(c);return this.layers.push(d),d},k.prototype.loadFromFusionTables=function(a){return(a=this.getFromFusionTables(a)).setMap(this.map),a},k.prototype.getFromKML=function(a){var b=a.url,c=a.events;delete a.url;delete a.events;var d,f=new google.maps.KmlLayer(b,a);for(d in c)!function(g){google.maps.event.addListener(f,g,function(h){c[g].apply(this,[h])})}(d);return this.layers.push(f),f},k.prototype.loadFromKML=function(a){return(a=this.getFromKML(a)).setMap(this.map),
a},k.prototype.addLayer=function(a,b){var c,d;switch(b=b||{},a){case "weather":this.singleLayers.weather=c=new google.maps.weather.WeatherLayer;break;case "clouds":this.singleLayers.clouds=c=new google.maps.weather.CloudLayer;break;case "traffic":this.singleLayers.traffic=c=new google.maps.TrafficLayer;break;case "transit":this.singleLayers.transit=c=new google.maps.TransitLayer;break;case "bicycling":this.singleLayers.bicycling=c=new google.maps.BicyclingLayer;break;case "panoramio":this.singleLayers.panoramio=
c=new google.maps.panoramio.PanoramioLayer;c.setTag(b.filter);delete b.filter;b.click&&google.maps.event.addListener(c,"click",function(f){b.click(f);delete b.click});break;case "places":this.singleLayers.places=c=new google.maps.places.PlacesService(this.map),(b.search||b.nearbySearch||b.radarSearch)&&(d={bounds:b.bounds||null,keyword:b.keyword||null,location:b.location||null,name:b.name||null,radius:b.radius||null,rankBy:b.rankBy||null,types:b.types||null},b.radarSearch&&c.radarSearch(d,b.radarSearch),
b.search&&c.search(d,b.search),b.nearbySearch&&c.nearbySearch(d,b.nearbySearch)),b.textSearch&&(d={bounds:b.bounds||null,location:b.location||null,query:b.query||null,radius:b.radius||null},c.textSearch(d,b.textSearch))}if(void 0!==c)return"function"==typeof c.setOptions&&c.setOptions(b),"function"==typeof c.setMap&&c.setMap(this.map),c},k.prototype.removeLayer=function(a){if("string"==typeof a&&void 0!==this.singleLayers[a])this.singleLayers[a].setMap(null),delete this.singleLayers[a];else for(var b=
0;b<this.layers.length;b++)if(this.layers[b]===a){this.layers[b].setMap(null);this.layers.splice(b,1);break}},k.prototype.getRoutes=function(a){switch(a.travelMode){case "bicycling":G=google.maps.TravelMode.BICYCLING;break;case "transit":G=google.maps.TravelMode.TRANSIT;break;case "driving":G=google.maps.TravelMode.DRIVING;break;default:G=google.maps.TravelMode.WALKING}O="imperial"===a.unitSystem?google.maps.UnitSystem.IMPERIAL:google.maps.UnitSystem.METRIC;var b=x({avoidHighways:!1,avoidTolls:!1,
optimizeWaypoints:!1,waypoints:[]},a);b.origin=/string/.test(typeof a.origin)?a.origin:new google.maps.LatLng(a.origin[0],a.origin[1]);b.destination=/string/.test(typeof a.destination)?a.destination:new google.maps.LatLng(a.destination[0],a.destination[1]);b.travelMode=G;b.unitSystem=O;delete b.callback;delete b.error;var c=[];(new google.maps.DirectionsService).route(b,function(d,f){if(f===google.maps.DirectionsStatus.OK){for(var g in d.routes)d.routes.hasOwnProperty(g)&&c.push(d.routes[g]);a.callback&&
a.callback(c,d,f)}else a.error&&a.error(d,f)})},k.prototype.removeRoutes=function(){this.routes.length=0},k.prototype.getElevations=function(a){0<(a=x({locations:[],path:!1,samples:256},a)).locations.length&&0<a.locations[0].length&&(a.locations=M(F([a.locations],L,!1)));var b=a.callback;delete a.callback;var c,d=new google.maps.ElevationService;a.path?(c={path:a.locations,samples:a.samples},d.getElevationAlongPath(c,function(f,g){b&&"function"==typeof b&&b(f,g)})):(delete a.path,delete a.samples,
d.getElevationForLocations(a,function(f,g){b&&"function"==typeof b&&b(f,g)}))},k.prototype.cleanRoute=k.prototype.removePolylines,k.prototype.renderRoute=function(a,b){var c="string"==typeof b.panel?document.getElementById(b.panel.replace("#","")):b.panel;b.panel=c;b=x({map:this.map},b);var d=new google.maps.DirectionsRenderer(b);this.getRoutes({origin:a.origin,destination:a.destination,travelMode:a.travelMode,waypoints:a.waypoints,unitSystem:a.unitSystem,error:a.error,avoidHighways:a.avoidHighways,
avoidTolls:a.avoidTolls,optimizeWaypoints:a.optimizeWaypoints,callback:function(f,g,h){h===google.maps.DirectionsStatus.OK&&d.setDirections(g)}})},k.prototype.drawRoute=function(a){var b=this;this.getRoutes({origin:a.origin,destination:a.destination,travelMode:a.travelMode,waypoints:a.waypoints,unitSystem:a.unitSystem,error:a.error,avoidHighways:a.avoidHighways,avoidTolls:a.avoidTolls,optimizeWaypoints:a.optimizeWaypoints,callback:function(c){var d;0<c.length&&(d={path:c[c.length-1].overview_path,
strokeColor:a.strokeColor,strokeOpacity:a.strokeOpacity,strokeWeight:a.strokeWeight},a.hasOwnProperty("icons")&&(d.icons=a.icons),b.drawPolyline(d),a.callback&&a.callback(c[c.length-1]))}})},k.prototype.travelRoute=function(a){if(a.origin&&a.destination)this.getRoutes({origin:a.origin,destination:a.destination,travelMode:a.travelMode,waypoints:a.waypoints,unitSystem:a.unitSystem,error:a.error,callback:function(f){if(0<f.length&&a.start&&a.start(f[f.length-1]),0<f.length&&a.step){var g=f[f.length-
1];if(0<g.legs.length)for(var h,n=g.legs[0].steps,l=0;h=n[l];l++)h.step_number=l,a.step(h,g.legs[0].steps.length-1)}0<f.length&&a.end&&a.end(f[f.length-1])}});else if(a.route&&0<a.route.legs.length)for(var b,c=a.route.legs[0].steps,d=0;b=c[d];d++)b.step_number=d,a.step(b)},k.prototype.drawSteppedRoute=function(a){var b=this;if(a.origin&&a.destination)this.getRoutes({origin:a.origin,destination:a.destination,travelMode:a.travelMode,waypoints:a.waypoints,error:a.error,callback:function(h){if(0<h.length&&
a.start&&a.start(h[h.length-1]),0<h.length&&a.step){var n=h[h.length-1];if(0<n.legs.length)for(var l,w=n.legs[0].steps,t=0;l=w[t];t++){l.step_number=t;var B={path:l.path,strokeColor:a.strokeColor,strokeOpacity:a.strokeOpacity,strokeWeight:a.strokeWeight};a.hasOwnProperty("icons")&&(B.icons=a.icons);b.drawPolyline(B);a.step(l,n.legs[0].steps.length-1)}}0<h.length&&a.end&&a.end(h[h.length-1])}});else if(a.route&&0<a.route.legs.length)for(var c,d=a.route.legs[0].steps,f=0;c=d[f];f++){c.step_number=f;
var g={path:c.path,strokeColor:a.strokeColor,strokeOpacity:a.strokeOpacity,strokeWeight:a.strokeWeight};a.hasOwnProperty("icons")&&(g.icons=a.icons);b.drawPolyline(g);a.step(c)}},k.Route=function(a){this.origin=a.origin;this.destination=a.destination;this.waypoints=a.waypoints;this.map=a.map;this.route=a.route;this.step_count=0;this.steps=this.route.legs[0].steps;this.steps_length=this.steps.length;var b={path:new google.maps.MVCArray,strokeColor:a.strokeColor,strokeOpacity:a.strokeOpacity,strokeWeight:a.strokeWeight};
a.hasOwnProperty("icons")&&(b.icons=a.icons);this.polyline=this.map.drawPolyline(b).getPath()},k.Route.prototype.getRoute=function(a){var b=this;this.map.getRoutes({origin:this.origin,destination:this.destination,travelMode:a.travelMode,waypoints:this.waypoints||[],error:a.error,callback:function(){b.route=e[0];a.callback&&a.callback.call(b)}})},k.Route.prototype.back=function(){if(0<this.step_count){this.step_count--;var a,b=this.route.legs[0].steps[this.step_count].path;for(a in b)b.hasOwnProperty(a)&&
this.polyline.pop()}},k.Route.prototype.forward=function(){if(this.step_count<this.steps_length){var a,b=this.route.legs[0].steps[this.step_count].path;for(a in b)b.hasOwnProperty(a)&&this.polyline.push(b[a]);this.step_count++}},k.prototype.checkGeofence=function(a,b,c){return c.containsLatLng(new google.maps.LatLng(a,b))},k.prototype.checkMarkerGeofence=function(a,b){if(a.fences)for(var c,d=0;c=a.fences[d];d++){var f=a.getPosition();this.checkGeofence(f.lat(),f.lng(),c)||b(a,c)}},k.prototype.toImage=
function(a){a=a||{};var b={};if(b.size=a.size||[this.el.clientWidth,this.el.clientHeight],b.lat=this.getCenter().lat(),b.lng=this.getCenter().lng(),0<this.markers.length){b.markers=[];for(var c=0;c<this.markers.length;c++)b.markers.push({lat:this.markers[c].getPosition().lat(),lng:this.markers[c].getPosition().lng()})}return 0<this.polylines.length&&(a=this.polylines[0],b.polyline={},b.polyline.path=google.maps.geometry.encoding.encodePath(a.getPath()),b.polyline.strokeColor=a.strokeColor,b.polyline.strokeOpacity=
a.strokeOpacity,b.polyline.strokeWeight=a.strokeWeight),k.staticMapURL(b)},k.staticMapURL=function(a){function b(E,z){if("#"===E[0]&&(E=E.replace("#","0x"),z)){if(0===(z=Math.min(1,Math.max(z=parseFloat(z),0))))return"0x00000000";1===(z=(255*z).toString(16)).length&&(z+=z);E=E.slice(0,8)+z}return E}var c=[],d=("file:"===location.protocol?"http:":location.protocol)+"//maps.googleapis.com/maps/api/staticmap";a.url&&(d=a.url,delete a.url);d+="?";var f=a.markers;delete a.markers;!f&&a.marker&&(f=[a.marker],
delete a.marker);var g=a.styles;delete a.styles;var h=a.polyline;delete a.polyline;a.center?(c.push("center="+a.center),delete a.center):a.address?(c.push("center="+a.address),delete a.address):a.lat?(c.push(["center=",a.lat,",",a.lng].join("")),delete a.lat,delete a.lng):a.visible&&(n=encodeURI(a.visible.join("|")),c.push("visible="+n));var n=a.size;for(t in n?(n.join&&(n=n.join("x")),delete a.size):n="630x300",c.push("size="+n),a.zoom||!1===a.zoom||(a.zoom=15),n=!a.hasOwnProperty("sensor")||!!a.sensor,
delete a.sensor,c.push("sensor="+n),a)a.hasOwnProperty(t)&&c.push(t+"="+a[t]);if(f){var l,w;for(a=0;q=f[a];a++){for(var t in l=[],q.size&&"normal"!==q.size?(l.push("size:"+q.size),delete q.size):q.icon&&(l.push("icon:"+encodeURI(q.icon)),delete q.icon),q.color&&(l.push("color:"+q.color.replace("#","0x")),delete q.color),q.label&&(l.push("label:"+q.label[0].toUpperCase()),delete q.label),w=q.address||q.lat+","+q.lng,delete q.address,delete q.lat,delete q.lng,q)q.hasOwnProperty(t)&&l.push(t+":"+q[t]);
l.length||0===a?(l.push(w),l=l.join("|"),c.push("markers="+encodeURI(l))):(l=c.pop()+encodeURI("|"+w),c.push(l))}}if(g)for(a=0;a<g.length;a++){l=[];g[a].featureType&&l.push("feature:"+g[a].featureType.toLowerCase());g[a].elementType&&l.push("element:"+g[a].elementType.toLowerCase());for(f=0;f<g[a].stylers.length;f++)for(var B in g[a].stylers[f])t=g[a].stylers[f][B],"hue"!=B&&"color"!=B||(t="0x"+t.substring(1)),l.push(B+":"+t);f=l.join("|");""!=f&&c.push("style="+f)}if(h){var q=h;h=[];q.strokeWeight&&
h.push("weight:"+parseInt(q.strokeWeight,10));q.strokeColor&&(n=b(q.strokeColor,q.strokeOpacity),h.push("color:"+n));q.fillColor&&(D=b(q.fillColor,q.fillOpacity),h.push("fillcolor:"+D));g=q.path;if(g.join)for(f=0;n=g[f];f++)h.push(n.join(","));else h.push("enc:"+g);h=h.join("|");c.push("path="+encodeURI(h))}var D=window.devicePixelRatio||1;return c.push("scale="+D),d+(c=c.join("&"))},k.prototype.addMapType=function(a,b){if(!b.hasOwnProperty("getTileUrl")||"function"!=typeof b.getTileUrl)throw"'getTileUrl' function required.";
b.tileSize=b.tileSize||new google.maps.Size(256,256);b=new google.maps.ImageMapType(b);this.map.mapTypes.set(a,b)},k.prototype.addOverlayMapType=function(a){if(!a.hasOwnProperty("getTile")||"function"!=typeof a.getTile)throw"'getTile' function required.";var b=a.index;delete a.index;this.map.overlayMapTypes.insertAt(b,a)},k.prototype.removeOverlayMapType=function(a){this.map.overlayMapTypes.removeAt(a)},k.prototype.addStyle=function(a){var b=new google.maps.StyledMapType(a.styles,{name:a.styledMapName});
this.map.mapTypes.set(a.mapTypeId,b)},k.prototype.setStyle=function(a){this.map.setMapTypeId(a)},k.prototype.createPanorama=function(a){return a.hasOwnProperty("lat")&&a.hasOwnProperty("lng")||(a.lat=this.getCenter().lat(),a.lng=this.getCenter().lng()),this.panorama=k.createPanorama(a),this.map.setStreetView(this.panorama),this.panorama},k.createPanorama=function(a){var b=C(a.el,a.context);a.position=new google.maps.LatLng(a.lat,a.lng);delete a.el;delete a.context;delete a.lat;delete a.lng;for(var c=
"closeclick links_changed pano_changed position_changed pov_changed resize visible_changed".split(" "),d=x({visible:!0},a),f=0;f<c.length;f++)delete d[c[f]];var g=new google.maps.StreetViewPanorama(b,d);for(f=0;f<c.length;f++)!function(h){a[h]&&google.maps.event.addListener(g,h,function(){a[h].apply(this)})}(c[f]);return g},k.prototype.on=function(a,b){return k.on(a,this,b)},k.prototype.off=function(a){k.off(a,this)},k.prototype.once=function(a,b){return k.once(a,this,b)},k.custom_events="marker_added marker_removed polyline_added polyline_removed polygon_added polygon_removed geolocated geolocation_failed".split(" "),
k.on=function(a,b,c){return-1==k.custom_events.indexOf(a)?(b instanceof k&&(b=b.map),google.maps.event.addListener(b,a,c)):(c={handler:c,eventName:a},b.registered_events[a]=b.registered_events[a]||[],b.registered_events[a].push(c),c)},k.off=function(a,b){-1==k.custom_events.indexOf(a)?(b instanceof k&&(b=b.map),google.maps.event.clearListeners(b,a)):b.registered_events[a]=[]},k.once=function(a,b,c){if(-1==k.custom_events.indexOf(a))return b instanceof k&&(b=b.map),google.maps.event.addListenerOnce(b,
a,c)},k.fire=function(a,b,c){if(-1==k.custom_events.indexOf(a))google.maps.event.trigger(b,a,Array.prototype.slice.apply(arguments).slice(2));else if(a in c.registered_events)for(var d=c.registered_events[a],f=0;f<d.length;f++)d[f].handler.apply(c,[b])},k.geolocate=function(a){var b=a.always||a.complete;navigator.geolocation?navigator.geolocation.getCurrentPosition(function(c){a.success(c);b&&b()},function(c){a.error(c);b&&b()},a.options):(a.not_supported(),b&&b())},k.geocode=function(a){this.geocoder=
new google.maps.Geocoder;var b=a.callback;a.hasOwnProperty("lat")&&a.hasOwnProperty("lng")&&(a.latLng=new google.maps.LatLng(a.lat,a.lng));delete a.lat;delete a.lng;delete a.callback;this.geocoder.geocode(a,function(c,d){b(c,d)})},"object"==typeof window.google&&window.google.maps&&(google.maps.Polygon.prototype.getBounds||(google.maps.Polygon.prototype.getBounds=function(a){for(var b=new google.maps.LatLngBounds,c=this.getPaths(),d=0;d<c.getLength();d++){a=c.getAt(d);for(var f=0;f<a.getLength();f++)b.extend(a.getAt(f))}return b}),
google.maps.Polygon.prototype.containsLatLng||(google.maps.Polygon.prototype.containsLatLng=function(a){var b=this.getBounds();if(null!==b&&!b.contains(a))return!1;b=!1;for(var c=this.getPaths().getLength(),d=0;d<c;d++)for(var f=this.getPaths().getAt(d),g=f.getLength(),h=g-1,n=0;n<g;n++){var l=f.getAt(n);h=f.getAt(h);(l.lng()<a.lng()&&h.lng()>=a.lng()||h.lng()<a.lng()&&l.lng()>=a.lng())&&l.lat()+(a.lng()-l.lng())/(h.lng()-l.lng())*(h.lat()-l.lat())<a.lat()&&(b=!b);h=n}return b}),google.maps.Circle.prototype.containsLatLng||
(google.maps.Circle.prototype.containsLatLng=function(a){return!google.maps.geometry||google.maps.geometry.spherical.computeDistanceBetween(this.getCenter(),a)<=this.getRadius()}),google.maps.Rectangle.prototype.containsLatLng=function(a){return this.getBounds().contains(a)},google.maps.LatLngBounds.prototype.containsLatLng=function(a){return this.contains(a)},google.maps.Marker.prototype.setFences=function(a){this.fences=a},google.maps.Marker.prototype.addFence=function(a){this.fences.push(a)},google.maps.Marker.prototype.getId=
function(){return this.__gm_id}),Array.prototype.indexOf||(Array.prototype.indexOf=function(a){if(null==this)throw TypeError();var b=Object(this),c=b.length>>>0;if(0==c)return-1;var d=0;if(1<arguments.length&&((d=Number(arguments[1]))!=d?d=0:0!=d&&d!=1/0&&d!=-1/0&&(d=(0<d||-1)*Math.floor(Math.abs(d)))),c<=d)return-1;for(d=0<=d?d:Math.max(c-Math.abs(d),0);d<c;d++)if(d in b&&b[d]===a)return d;return-1}),k});